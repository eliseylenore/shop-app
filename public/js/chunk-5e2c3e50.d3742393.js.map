{"version":3,"sources":["webpack:///./src/views/Checkout.vue?8c10","webpack:///./src/keys.js","webpack:///src/views/Checkout.vue","webpack:///./src/views/Checkout.vue?39ed","webpack:///./src/views/Checkout.vue","webpack:///./src/views/Checkout.vue?26b9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","on","$event","preventDefault","submitPayment","_e","key","staticRenderFns","VUE_APP_STRIPE_KEY","components","CartSummary","data","card","loading","mounted","style","base","iconColor","color","fontFamily","fontSize","fontSmoothing","invalid","elements","stripe","create","mount","document","querySelector","disabled","event","empty","error","textContent","computed","methods","$store","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,cAAc,CAACA,EAAG,SAAS,CAACA,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACN,EAAIO,GAAG,gBAAgBH,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,YAAY,OAAOE,MAAM,CAAC,GAAK,KAAK,GAAK,IAAI,YAAY,MAAM,CAACJ,EAAG,SAAS,CAACK,GAAG,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBX,EAAIY,mBAAmB,CAACR,EAAG,eAAe,CAACA,EAAG,MAAM,CAACI,MAAM,CAAC,GAAK,kBAAkBJ,EAAG,MAAM,CAACI,MAAM,CAAC,GAAK,kBAAkBJ,EAAG,IAAI,CAACE,YAAY,iBAAiB,CAACN,EAAIO,GAAG,2DAA2DH,EAAG,IAAI,CAACE,YAAY,YAAY,CAACN,EAAIO,GAAG,6DAA6DH,EAAG,SAAS,CAACE,YAAY,kBAAkBE,MAAM,CAAC,GAAK,SAAS,KAAO,WAAW,CAACR,EAAIO,GAAG,uBAAuB,GAAIP,EAAW,QAAEI,EAAG,MAAM,CAACE,YAAY,qEAAqE,CAACN,EAAIO,GAAG,mBAAmBH,EAAG,MAAM,CAACE,YAAY,aAAaN,EAAIa,MAAM,GAAGT,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,KAAK,GAAK,IAAI,YAAY,MAAM,CAACJ,EAAG,eAAe,CAACU,IAAI,MAAM,IAAI,IAAI,IAAI,IACnkCC,EAAkB,G,gDCDhBC,EAAqB,mCACZA,IC0Cf,mBAEA,GACEC,WAAY,CACVC,YAAJ,QAEEC,KAJF,WAKI,MAAO,CACLC,KAAM,KACNC,SAAS,IAGbC,QAVF,WAWI,IAAIC,EAAQ,CACVC,KAAM,CACJC,UAAW,UACXC,MAAO,OACPC,WAAY,yBACZC,SAAU,OACVC,cAAe,cACf,oBAAqB,CACnBH,MAAO,WAET,gBAAiB,CACfA,MAAO,YAGXI,QAAS,CACPL,UAAW,UACXC,MAAO,YAGPK,EAAWC,EAAOD,WACtB9B,KAAKmB,KAAOW,EAASE,OAAO,OAAQ,CAAxC,UACIhC,KAAKmB,KAAKc,MAAM,iBAChBjC,KAAKmB,KAAKX,GAAG,UAAU,SAA3B,GAEM0B,SAASC,cAAc,WAAWC,SAAWC,EAAMC,OAASD,EAAME,MAClEL,SAASC,cAAc,eAAeK,YAAcH,EAAME,MAChE,gBACA,OAGEE,SAAU,OAAZ,OAAY,CAAZ,kBACA,gBACI,KAAJ,YAAM,OAAN,WAEA,kCAEEC,QAAS,CACP/B,cADJ,WACA,WAEMX,KAAKoB,SAAU,EACfpB,KAAK2C,OACX,yBACA,kBACQ,IAAR,gBACA,wBAEQ,EACR,sBACU,eAAV,CACY,KAAZ,OACY,KAAZ,OACY,gBAAZ,CACc,QAAd,CACgB,KAAhB,OACgB,QAAhB,KACgB,MAAhB,eACgB,MAAhB,eACgB,YAAhB,WAEc,MAAd,aACc,KAAd,WAIA,kBACA,SACY,EAAZ,WAGY,QAAZ,qBACY,SAAZ,yCACA,kBAEY,EAAZ,WACY,EAAZ,8CACc,EAAd,cAAgB,KAAhB,0BAIA,mBAAU,OAAV,4BAEA,mBAAQ,OAAR,6BCzIkV,I,wBCQ9UC,EAAY,eACd,EACA9C,EACAgB,GACA,EACA,KACA,WACA,MAIa,aAAA8B,E,kECnBf","file":"js/chunk-5e2c3e50.d3742393.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-5\"},[_c('b-container',[_c('header',[_c('h1',{staticClass:\"mb-5\"},[_vm._v(\"Checkout\")])]),_c('b-row',[_c('b-col',{staticClass:\"mb-5\",attrs:{\"xs\":\"12\",\"md\":\"6\",\"offset-xl\":\"1\"}},[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submitPayment()}}},[_c('b-form-group',[_c('div',{attrs:{\"id\":\"card-element\"}}),_c('div',{attrs:{\"id\":\"card-error\"}})]),_c('p',{staticClass:\"red-text mb-0\"},[_vm._v(\" This is a test interaction. Do not use a real card. \")]),_c('p',{staticClass:\"red-text\"},[_vm._v(\" Please use this test card number: 4242 4242 4242 4242 \")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"id\":\"submit\",\"type\":\"submit\"}},[_vm._v(\" Submit Payment \")])],1),(_vm.loading)?_c('div',{staticClass:\"d-flex justify-content-center align-items-center flex-column mt-5\"},[_vm._v(\" Processing... \"),_c('div',{staticClass:\"loader\"})]):_vm._e()],1),_c('b-col',{attrs:{\"xs\":\"12\",\"md\":\"4\",\"offset-md\":\"1\"}},[_c('cart-summary',{key:\"\"})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const VUE_APP_STRIPE_KEY = \"pk_test_O13VvsWUjRzTeq5SJhzKEAUT\";\r\nexport default VUE_APP_STRIPE_KEY;\r\n","<template>\r\n  <div class=\"mt-5\">\r\n    <b-container>\r\n      <header>\r\n        <h1 class=\"mb-5\">Checkout</h1>\r\n      </header>\r\n      <b-row>\r\n        <b-col xs=\"12\" md=\"6\" offset-xl=\"1\" class=\"mb-5\">\r\n          <b-form @submit.prevent=\"submitPayment()\">\r\n            <b-form-group>\r\n              <div id=\"card-element\"></div>\r\n              <div id=\"card-error\"></div>\r\n            </b-form-group>\r\n            <p class=\"red-text mb-0\">\r\n              This is a test interaction. Do not use a real card.\r\n            </p>\r\n            <p class=\"red-text\">\r\n              Please use this test card number: 4242 4242 4242 4242\r\n            </p>\r\n            <button class=\"btn btn-primary\" id=\"submit\" type=\"submit\">\r\n              Submit Payment\r\n            </button>\r\n          </b-form>\r\n          <div\r\n            class=\"d-flex justify-content-center align-items-center flex-column mt-5\"\r\n            v-if=\"loading\"\r\n          >\r\n            Processing...\r\n            <div class=\"loader\"></div>\r\n          </div>\r\n        </b-col>\r\n        <b-col xs=\"12\" md=\"4\" offset-md=\"1\">\r\n          <cart-summary key=\"\" />\r\n        </b-col>\r\n      </b-row>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CartSummary from \"@/components/CartSummary.vue\";\r\nimport { mapState, mapGetters } from \"vuex\";\r\nimport VUE_APP_STRIPE_KEY from \"@/keys.js\";\r\nlet stripe = window.Stripe(VUE_APP_STRIPE_KEY);\r\n\r\nexport default {\r\n  components: {\r\n    CartSummary\r\n  },\r\n  data() {\r\n    return {\r\n      card: null,\r\n      loading: false\r\n    };\r\n  },\r\n  mounted() {\r\n    var style = {\r\n      base: {\r\n        iconColor: \"#019494\",\r\n        color: \"#000\",\r\n        fontFamily: \"Myriad Pro, sans-serif\",\r\n        fontSize: \"16px\",\r\n        fontSmoothing: \"antialiased\",\r\n        \":-webkit-autofill\": {\r\n          color: \"#fce883\"\r\n        },\r\n        \"::placeholder\": {\r\n          color: \"#019494\"\r\n        }\r\n      },\r\n      invalid: {\r\n        iconColor: \"#FF5E5C\",\r\n        color: \"#FF5E5C\"\r\n      }\r\n    };\r\n    var elements = stripe.elements();\r\n    this.card = elements.create(\"card\", { style: style });\r\n    this.card.mount(\"#card-element\");\r\n    this.card.on(\"change\", function(event) {\r\n      // Disable the Pay button if there are no card details in the Element\r\n      document.querySelector(\"#submit\").disabled = event.empty || event.error;\r\n      document.querySelector(\"#card-error\").textContent = event.error\r\n        ? event.error.message\r\n        : \"\";\r\n    });\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      cart: state => state.cart\r\n    }),\r\n    ...mapGetters([\"getCartTotal\"])\r\n  },\r\n  methods: {\r\n    submitPayment() {\r\n      // loading(true);\r\n      this.loading = true;\r\n      this.$store\r\n        .dispatch(\"checkoutCart\")\r\n        .then(res => {\r\n          let clientSecret = res.data.secret;\r\n          let address = this.cart.billingAddress;\r\n\r\n          stripe\r\n            .confirmCardPayment(clientSecret, {\r\n              payment_method: {\r\n                type: \"card\",\r\n                card: this.card,\r\n                billing_details: {\r\n                  address: {\r\n                    city: address.city,\r\n                    country: \"US\",\r\n                    line1: address.addressline1,\r\n                    line2: address.addressline2,\r\n                    postal_code: address.zipcode\r\n                  },\r\n                  email: this.cart.email,\r\n                  name: address.name\r\n                }\r\n              }\r\n            })\r\n            .then(result => {\r\n              if (result.error) {\r\n                this.loading = false;\r\n                // To-do: show error to your customer\r\n                // showError(result.error.message);\r\n                console.log(result.error.message);\r\n                document.querySelector(\"#card-error\").textContent =\r\n                  result.error.message;\r\n              } else {\r\n                this.loading = false;\r\n                this.$store.dispatch(\"emptyCart\").then(() => {\r\n                  this.$router.push({ name: \"OrderSubmitted\" });\r\n                });\r\n              }\r\n            })\r\n            .catch(err => console.log(\"ERR!\", err));\r\n        })\r\n        .catch(err => console.log(\"err: \", err));\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.loader {\r\n  border: 16px solid $turquoise-light; /* Light grey */\r\n  border-top: 16px solid $turquoise-dark;\r\n  border-radius: 50%;\r\n  width: 120px;\r\n  height: 120px;\r\n  animation: spin 2s ease-in infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Checkout.vue?vue&type=template&id=2cac1158&scoped=true&\"\nimport script from \"./Checkout.vue?vue&type=script&lang=js&\"\nexport * from \"./Checkout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Checkout.vue?vue&type=style&index=0&id=2cac1158&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2cac1158\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=style&index=0&id=2cac1158&lang=scss&scoped=true&\""],"sourceRoot":""}